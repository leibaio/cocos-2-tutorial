{"version":3,"sources":["assets\\scripts\\Game.js"],"names":["cc","Class","Component","properties","starPrefab","type","Prefab","maxStarDuration","minStarDuration","ground","Node","player","onLoad","console","log","groundY","y","height","spawnNewStar","newStar","instantiate","node","addChild","setPosition","getNewStarPosition","getComponent","game","randX","randY","Math","random","jumpHeight","maxX","width","v2","start"],"mappings":";;;;;;AAAAA,EAAE,CAACC,KAAK,CAAC;EACP,WAASD,EAAE,CAACE,SAAS;EAErBC,UAAU,EAAE;IACV;IACAC,UAAU,EAAE;MACV,WAAS,IAAI;MACbC,IAAI,EAAEL,EAAE,CAACM;IACX,CAAC;IAED;IACAC,eAAe,EAAE,CAAC;IAClBC,eAAe,EAAE,CAAC;IAElB;IACAC,MAAM,EAAE;MACN,WAAS,IAAI;MACbJ,IAAI,EAAEL,EAAE,CAACU;IACX,CAAC;IAED;IACAC,MAAM,EAAE;MACN,WAAS,IAAI;MACbN,IAAI,EAAEL,EAAE,CAACU;IACX;EACF,CAAC;EAED;EAEAE,MAAM,WAAAA,OAAA,EAAG;IACPC,OAAO,CAACC,GAAG,CAAC,mBAAmB,EAAE,IAAI,CAACL,MAAM,CAAC;IAC7CI,OAAO,CAACC,GAAG,CAAC,mBAAmB,EAAE,IAAI,CAACH,MAAM,CAAC;IAC7C;IACA,IAAI,CAACI,OAAO,GAAG,IAAI,CAACN,MAAM,CAACO,CAAC,GAAG,IAAI,CAACP,MAAM,CAACQ,MAAM,GAAG,CAAC;IACrD;IACA,IAAI,CAACC,YAAY,EAAE;EACrB,CAAC;EAEDA,YAAY,WAAAA,aAAA,EAAG;IACb;IACA,IAAIC,OAAO,GAAGnB,EAAE,CAACoB,WAAW,CAAC,IAAI,CAAChB,UAAU,CAAC;IAC7C;IACA,IAAI,CAACiB,IAAI,CAACC,QAAQ,CAACH,OAAO,CAAC;IAC3B;IACAA,OAAO,CAACI,WAAW,CAAC,IAAI,CAACC,kBAAkB,EAAE,CAAC;;IAE9C;IACAL,OAAO,CAACM,YAAY,CAAC,MAAM,CAAC,CAACC,IAAI,GAAG,IAAI;EAC1C,CAAC;EAEDF,kBAAkB,WAAAA,mBAAA,EAAG;IACnB,IAAIG,KAAK,GAAG,CAAC;IACb;IACA,IAAIC,KAAK,GACP,IAAI,CAACb,OAAO,GACZc,IAAI,CAACC,MAAM,EAAE,GAAG,IAAI,CAACnB,MAAM,CAACc,YAAY,CAAC,QAAQ,CAAC,CAACM,UAAU,GAC7D,EAAE;IACJ;IACA,IAAIC,IAAI,GAAG,IAAI,CAACX,IAAI,CAACY,KAAK,GAAG,CAAC;IAC9BN,KAAK,GAAG,CAACE,IAAI,CAACC,MAAM,EAAE,GAAG,GAAG,IAAI,CAAC,GAAGE,IAAI;IACxC;IACA,OAAOhC,EAAE,CAACkC,EAAE,CAACP,KAAK,EAAEC,KAAK,CAAC;EAC5B,CAAC;EAEDO,KAAK,WAAAA,MAAA,EAAG,CAAC,CAAC,CAEV;AACF,CAAC,CAAC","sourceRoot":"/","sourcesContent":["cc.Class({\n  extends: cc.Component,\n\n  properties: {\n    // 这个属性引用了星星预制资源\n    starPrefab: {\n      default: null,\n      type: cc.Prefab,\n    },\n\n    // 星星产生后消失时间的随机范围\n    maxStarDuration: 0,\n    minStarDuration: 0,\n\n    // 地面节点，用于确定星星生成的高度\n    ground: {\n      default: null,\n      type: cc.Node,\n    },\n\n    // Player 节点，用于获取主角弹跳的高度，和控制主角行动开关\n    player: {\n      default: null,\n      type: cc.Node,\n    },\n  },\n\n  // LIFE-CYCLE CALLBACKS:\n\n  onLoad() {\n    console.log(\"[ this.ground ] >\", this.ground);\n    console.log(\"[ this.player ] >\", this.player);\n    // 获取地平面的 y 轴坐标\n    this.groundY = this.ground.y + this.ground.height / 2;\n    // 生成一个新的星星\n    this.spawnNewStar();\n  },\n\n  spawnNewStar() {\n    // 使用给定的模板在场景中生成一个新节点\n    let newStar = cc.instantiate(this.starPrefab);\n    // 将新增的节点添加到 Canvas 节点下面\n    this.node.addChild(newStar);\n    // 为星星设置一个随机位置\n    newStar.setPosition(this.getNewStarPosition());\n\n    // 在星星脚本组件上保存 Game 对象的引用\n    newStar.getComponent(\"Star\").game = this;\n  },\n\n  getNewStarPosition() {\n    let randX = 0;\n    // 根据地平面位置和主角跳跃高度，随机得到一个星星的 y 坐标\n    let randY =\n      this.groundY +\n      Math.random() * this.player.getComponent(\"Player\").jumpHeight +\n      50;\n    // 根据屏幕宽度，随机得到一个星星 x 坐标\n    let maxX = this.node.width / 2;\n    randX = (Math.random() - 0.5) * 2 * maxX;\n    // 返回星星坐标\n    return cc.v2(randX, randY);\n  },\n\n  start() {},\n\n  // update (dt) {},\n});\n"]}